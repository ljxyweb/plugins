!function(i){function s(s,t){this.$element=s,this.$digitpassword=null,this.$guangbiao=null,this.defaults={smallboxwidth:35,smallboxnum:6},this.options=i.extend({},this.defaults,t)}s.prototype={init:function(){this.initWidget(),this.addEvents()},initWidget:function(){for(var s,t=this.options.smallboxnum,e="",n=0;n<t;n++)e+="<i><b></b></i>";this.$guangbiao=i('<span class="guangbiao" style="left:-1px;visibility: hidden;"></span>'),this.$element.addClass("i-text"),this.$element.wrap('<div class="paymentcontainer"></div>'),this.$element.after('<div class="digitpassword"></div>'),this.$digitpassword=this.$element.parent(".paymentcontainer").find(".digitpassword"),this.$digitpassword.append(e),this.$digitpassword.append(this.$guangbiao),this.$digitpassword.find("i").width(this.options.smallboxwidth),s=this.$digitpassword.outerWidth(),this.$element.parent(".paymentcontainer").width(s),this.$element.width(s),this.$guangbiao.width(this.options.smallboxwidth)},addEvents:function(){var s=this.options.smallboxwidth+1,t=this.options.smallboxnum,e=this.$guangbiao,n=this.$digitpassword;this.$element.on("focus",function(){var t=i(this).val().length;e.css({visibility:"visible",left:t*s-1}),n.find("i").eq(t).addClass("active").siblings("i").removeClass("active")}),this.$element.on("blur",function(){e.css({visibility:"hidden"}),n.find("i").removeClass("active")}),this.$element.on("keyup",function(){var a=i(this).val().length,l=n.find("i");if(0==a)n.find("b").css({display:"none"}),l.eq(0).addClass("active").siblings("i").removeClass("active"),e.css({left:-1});else if(a>=t)return n.find("b").css({display:"block"}),l.removeClass("active"),void e.css({visibility:"hidden"});l.eq(a).addClass("active").siblings("i").removeClass("active"),l.eq(a).prevAll("i").find("b").css({display:"block"}),l.eq(a-1).nextAll("i").find("b").css({display:"none"}),e.css({left:a*s-1,visibility:"visible"})})}},i.fn.paymentContainer=function(t){return this.each(function(){i(this).val(""),new s(i(this),t).init()})}}(jQuery);