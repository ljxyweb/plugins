!function(i){if("function"==typeof define&&define.amd)define(["jquery"],i);else if("object"==typeof module&&module.exports){var t=require("jquery");i(t),module.exports=t}else i(jQuery)}(function(i){function t(t,e){this.defaults={value:[.5,.5],useSize:!1,size:100,startAngle:-.5*Math.PI,loadClockwise:!0,arcWidth:"auto",fillColor:["#3aeabb","#fdd250"],emptyFill:"#eee",animation:{duration:1200,easing:"circularBarEasing"},lineCap:"butt"},this.$el=t,this.canvas=null,this.ctx=null,this.radius=0,this.options=i.extend({},this.defaults,e)}i.easing.circularBarEasing=function(i,t,e,s,a){return(t/=a/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},t.prototype={init:function(){var t=this.options;t.useSize||(t.size=i(this.$el).height()),t.arcWidth=this.getArcWidth(),this.radius=t.size/2,i.isNumeric(t.value)&&(t.loadClockwise?(t.value=[0,parseFloat(t.value)],"string"==typeof t.fillColor?t.fillColor=[t.emptyFill,t.fillColor]:console.log("Error:fillColor needs to be string")):(t.value=[parseFloat(t.value),0],"string"==typeof t.fillColor?t.fillColor=[t.fillColor,t.emptyFill]:console.log("Error:fillColor needs to be string"))),i.isArray(t.value)&&t.value.length>1&&(this.initWidget(),this.draw())},initWidget:function(){var t=this.canvas=this.canvas||i("<canvas>").prependTo(this.$el)[0],e=this.options.size;if(t.width=e,t.height=e,this.ctx=t.getContext("2d"),window.devicePixelRatio>1){var s=window.devicePixelRatio;t.style.width=t.style.height=e+"px",t.width=t.height=e*s,this.ctx.scale(s,s)}},draw:function(){this.options.animation?this.drawAnimated():this.drawFrame(!0)},drawFrame:function(i,t){var e=this.options,s=[e.value[0],e.value[1]];i||(s[0]=t*s[0],s[1]=t*s[1]),this.ctx.clearRect(0,0,this.size,this.size),this.drawArc(s)},drawArc:function(i){var t=this.ctx,e=this.radius,s=this.options,a=s.arcWidth,o=s.startAngle,n=i[0],r=i[1];t.beginPath(),t.arc(e,e,e-a,0,2*Math.PI),t.lineWidth=a,t.strokeStyle=s.emptyFill,t.stroke(),t.save(),t.beginPath(),t.arc(e,e,e-a,o,o-2*Math.PI*n,!0),t.lineCap=s.lineCap,t.strokeStyle=s.fillColor[0],t.stroke(),t.restore(),t.beginPath(),t.arc(e,e,e-a,o,o+2*Math.PI*r),t.lineCap=s.lineCap,t.strokeStyle=s.fillColor[1],t.stroke()},drawAnimated:function(){var t=this;t.$el;i(t.canvas).stop(!0,!0).css({animationProgress:0}).animate({animationProgress:1},i.extend({},t.options.animation,{step:function(i){t.drawFrame(!1,i)}}))},getArcWidth:function(){return i.isNumeric(this.options.arcWidth)?parseInt(this.options.arcWidth):this.options.size/14}},i.fn.circularBar=function(e){return this.each(function(){new t(i(this),e).init()})}});